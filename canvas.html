<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas lighting</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <style>

        body {
            height: 6000px;
            background: #000;
        }

        canvas {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%); 
            max-width: 100vw;
            max-height: 100vh;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>
    <script>

        const canvas = document.getElementById("canvas"),
            ctx = canvas.getContext("2d"),
            frames = 147;
        canvas.width = 1158;
        canvas.height = 770;
        const currentFrame = index => (
            `https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/${(index + 1).toString().padStart(4, '0')}.jpg`
        );
        const images = []
        const airpods = {
            frame: 0
        };
        for (let i = 0; i < frames; i++) {
            const img = new Image();
            img.src = currentFrame(i);
            images.push(img);
        }
        gsap.to(airpods, {
            frame: frames - 1,
            snap: 'frame',
            ease: 'none',
            scrollTrigger: {
                scrub: 0.5,
            },
            onUpdate: () => {
                ctx.clearRect(0, 0, 1158, 770);
                ctx.drawImage(images[airpods.frame], 0, 0);
            }
        })
        images[0].onload = () => {
            ctx.drawImage(images[0], 0, 0);
            ctx.drawImage
        }


    </script>
</body>

</html>